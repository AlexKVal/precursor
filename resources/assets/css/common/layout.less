#app {
  .flexy();
  color: @gray_lighter;
  background: @gray_darker;
  height: 100vh;
  overflow: hidden;
}
.app-main {
  .flex(1);
}
#svg-canvas {
  .layers {
    rect,
    line,
    path {
      &:not(#background-grid) {
        fill: none;
        stroke: @gray_light;
        stroke-width: 2;
        &:hover {
          stroke: lighten(@select_blue, 5%);
        }
        &.selected {
          stroke: @select_blue;
        }

      }
    }
  }
  text {
    fill: @gray_light;
    &:hover {
      fill: lighten(@select_blue, 5%);
    }
    &.selected {
      fill: @select_blue;
    }
  }
  .mouse-tool {
    fill: none;
    stroke-width: 6;
  }
  .svg-text-form {
    input {
      border: none;
      background: none;
      outline: none;
      box-shadow: 0 -1px @select_blue inset;
    }
  }
}
#grid,
#small-grid {
  path {
    stroke: @gray_dark;
    transition: 300ms;
  }
}
.mouse-stats {
  .user-select(none);
  pointer-events: none;
  position: fixed;
  top: 100%;
  margin-top: -2em;
  width: 100%;
  text-align: right;
  right: 0.5em;
  color: fade(@white, 25);
  transition-duration: 200ms;
}

.app-aside {
  .flexy();
  position: relative;
  width: 0;
  box-shadow: 1px 0 @gray_dark;
  transition: 200ms;
  &.hover {
    width: @aside_width_lg;
    transition-duration: 200ms;
    transition-timing-function: @bezier_bounce;
    + .app-main {
      .mouse-stats {
        opacity: 0;
      }
    }
    .aside-menu {
      i {
        margin-right: @icon_width;
        transition-duration: 100ms;
        transition-timing-function: @bezier_bounce;
      }
    }
    .aside-chat {
      input {
        padding: 0 1em;
        height: @tile;
      }
    }
    .unseen-eids {
      height: 0;
      opacity: 0;
    }
    .chat-messages {
      margin-left: 0;
      opacity: 1;
    }
  }
}
.aside-toggles {
  .flexy(column);
  position: absolute;
  top: 0;
  left: 100%;
  width: @tile;
  // background: red;
  a,
  button {
    .flexy(center, center);
    height: @tile;
    i {
      svg {
        font-size: 1.5em;
      }
    }
  }
}
.aside-menu {
  .flex(1);
  .flexy(column);
  a {
    border-bottom: 1px solid @gray_dark;
  }
  a,
  button {
    .flex(0 0 auto);
    .flexy(center);
    .button_icon_cascade(10);
    .icon_stroke(@gray_lighter);
    height: @tile;
    color: @gray_light;
    transition: 100ms;
    &:not([disabled]) {
      &:hover {
        .icon_stroke(@gray_lightest);
        cursor: pointer;
        color: @gray_lighter;
        background: @gray_dark;
        transition-duration: 100ms;
      }
    }
    i {
      .flex(0 0 auto);
      margin: 0 ((@aside_width_sm - @icon_width) / 2);
      transition: 300ms;
    }
    span {
      overflow: hidden;
    }
  }
  .aside-settings {
    > button {
      &:hover {
        background: none;
      }
    }
  }
}
.aside-chat {
  .flex(1);
  .flexy(column);
  overflow: hidden;
  form {
    .flex(0 0 auto);
    .flexy();
    margin: 0;
  }
  input {
    width: 100%;
    height: 0;
    border: none;
    border-top: 1px solid #555;
    padding: 0 1em 0 @tile;
    outline: 0;
    background: none;
    transition: 200ms @bezier_transform;
  }
  .unseen-eids {
    .flex(0 0 auto);
    .flexy(center, center);
    position: relative;
    height: @tile;
    overflow: hidden;
    transition: 200ms @bezier_transform;
    .count {
      .flexy(center, center);
      position: absolute;
      top: 1em;
      right: 1em;
      font-size: .75em;
      height: 1.5em;
      min-width: 1.5em;
      line-height: 1.5em;
      background: #F73936;
      border: 1px solid @gray_darker;
      border-radius: 1em;
      font-weight: bold;
      padding-bottom: 2%;
    }
    i {
      svg {
        width: 1.25em;
        height: 1.25em;
      }
      path {
        stroke: @white;
      }
    }
  }
}
.chat-container {
  .flexy(column);
  margin-top: auto;
}
.chat-messages {
  width: @aside_width_lg;
  margin-left: @tile;
  padding: 1em;
  opacity: 0;
  overflow-y: auto;
  overflow-x: hidden;
  transition: 200ms @bezier_transform;
  &::-webkit-scrollbar {
    width: 0;
  }
  span {
    word-break: break-word;
  }
}
.aside-settings {
  .flexy(column);
  margin-top: auto;
  opacity: 1;
  transition: 300ms @bezier_fadein;
  &:hover {
    > button {
      .user-select(none);
      opacity: 0;
      cursor: default;
      // this is still pretty buggy, opens and closes at weird times
      transition-duration: 200ms;
      height: 0;
    }
    .settings-menu {
      max-height: @tile * 3;
      transition-duration: 200ms;
    }
  }
}
.settings-menu {
  .flexy(column);
  max-height: 0;
  transition: 300ms @bezier_transform;
  button {
    padding-left: ((@aside_width_sm - @icon_width) / 2);
    i {
      margin-left: auto;
      margin-right: ((@aside_width_sm - @icon_width) / 2);
    }
  }
}
.radial-menu {
  position: fixed;
  width: (@radial_menu_size * 1.5);
  height: (@radial_menu_size * 1.5);
  .radial-button {
    .scale3d(1.1);
    fill: @gray_dark;
    stroke: @gray_dark;
    &:not(:hover) {
      .scale3d(1);
      fill: @gray_darker;
      i {
        path {
          stroke: @gray_light;
        }
      }
    }
    &:nth-child(1) { .transform-origin(bottom left); }
    &:nth-child(2) { .transform-origin(left); }
    &:nth-child(3) { .transform-origin(top left); }
    &:nth-child(4) { .transform-origin(top right); }
    &:nth-child(5) { .transform-origin(right); }
    &:nth-child(6) { .transform-origin(bottom right); }
  }
  i {
    path {
      stroke: @gray_lighter;
    }
  }
}
.radial-tool-type {
  .flexy(center, center, column);
  .user-select(none);
  pointer-events: none;
  position: absolute;
  text-transform: capitalize;
  &:nth-of-type(1) { top: 100px; left: 215px; }
  &:nth-of-type(2) { top: 170px; left: 260px; }
  &:nth-of-type(3) { top: 240px; left: 215px; }
  &:nth-of-type(4) { top: 240px; left: 140px; }
  &:nth-of-type(5) { top: 170px; left: 100px; }
  &:nth-of-type(6) { top: 100px; left: 135px; }
  i {
    margin-bottom: .25em;
  }
}
.radial-menu-nub {
  @size: (@font_size / 2);
  width: @size;
  height: @size;
  border-radius: @size;
  background: @gray_dark;
  position: absolute;
  top: (((@radial_menu_size * 1.5) - @size) / 2);
  left: (((@radial_menu_size * 1.5) - @size) / 2);
  cursor: default;
}
.right-click-menu {
  display: none !important; // hold off for now
  .flexy(column);
  .outline(@gray_dark);
  position: fixed;
  top: 25%;
  left: 25%;
  width: (@radial_menu_size * (2 / 3));
  background: @gray_darker;
  overflow: hidden;
  button {
    .flexy();
    height: (@tile / 2);
    padding: 0 1em;
    color: @gray_light;
    background: @gray_darker;
    transition: 200ms;
    &:hover {
      color: @gray_lighter;
      background: @gray_dark;
    }
  }
  hr {
    width: 100%;
    border: 0;
    box-shadow: 0 1px @gray_dark inset;
    height: 1px;
  }
}
.right-click-align {
  display: none !important; // hold off for now
  .flexy(column);
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
  button {
    background: @app_background;
  }
}
