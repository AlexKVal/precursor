.night-mode {
  color: @gray_lighter;
  background: @gray_darker;
  #grid,
  #small-grid {
    path {
      stroke: @gray_dark;
    }
  }
  .app-aside {
    box-shadow: 1px 0 @gray_dark;
  }
  .aside-menu {
    a,
    button {
      .icon_stroke(@gray_lighter);
      color: @gray_light;
      border-color: @gray_dark;
      &:not([disabled]) {
        &:hover {
          .icon_stroke(@gray_lightest);
          color: @gray_lighter;
          background: @gray_dark;
        }
      }
    }
  }
  #svg-canvas {
    .layers {
      rect,
      line,
      path {
        &:not(#background-grid) {
          stroke: @gray_light;
        }
        &.selected {
          stroke: @select_blue;
        }
      }
    }
    text {
      fill: @gray_light;
      &.selected {
        fill: @select_blue;
      }
    }
    .mouse-stats {
      fill: fade(@white, 13);
    }
  }
  .radial-menu {
    .radial-button {
      fill: @gray_dark;
      stroke: @gray_dark;
      &:not(:hover) {
        fill: @gray_darker;
        i {
          path {
            stroke: @gray_light;
          }
        }
      }
    }
    i {
      path {
        stroke: @gray_lighter;
      }
    }
  }
  .radial-menu-nub {
    background: @gray_dark;
  }
  .right-click-menu {
    .outline(@gray_dark);
    background: @gray_darker;
    button {
      color: @gray_light;
      background: @gray_darker;
      &:hover {
        color: @gray_lighter;
        background: @gray_dark;
      }
    }
    hr {
      box-shadow: 0 1px @gray_dark inset;
    }
  }
}
#app {
  .flexy();
  height: 100vh;
  overflow: hidden;
  &:not(.show-grid) {
    #grid,
    #small-grid {
      path {
        opacity: 0;
      }
    }
  }
}
.app-main {
  .flex(1);
}
#svg-canvas {
  .layers {
    rect,
    line,
    path {
      &:not(#background-grid) {
        fill: none;
        stroke: @gray_dark;
        stroke-width: 2;
        &.selected {
          stroke: @select_blue;
        }
      }
    }
  }
  text {
    fill: @font_color;
    &.selected {
      fill: @select_blue;
    }
  }
  .mouse-stats {
    fill: fade(@black, 21);
    transition-duration: 200ms;
  }
  .mouse-tool {
    fill: none;
    stroke-width: 6;
  }
  .svg-text-form {
    input {
      border: none;
      background: none;
      outline: none;
      box-shadow: 0 -1px @select_blue inset;
    }
  }
}
#grid,
#small-grid {
  path {
    stroke: @gray_lighter;
    transition: 300ms;
  }
}
.app-aside {
  .flexy();
  width: @aside_width_sm;
  box-shadow: 1px 0 @gray_light;
  transition: 200ms;
  &.hover {
    width: @aside_width_lg;
    transition-duration: 200ms;
    transition-timing-function: @bezier_bounce;
    + .app-main {
      .mouse-stats {
        opacity: 0;
      }
    }
    .chat-messages {
      margin-left: 0;
      opacity: 1;
    }
    i {
      margin-right: @icon_width;
      transition-duration: 100ms;
      transition-timing-function: @bezier_bounce;
    }
  }
}
.aside-menu {
  .flex(1);
  .flexy(column);
  a {
    border-bottom: 1px solid @gray_lightest;
  }
  a,
  button {
    .flex(0 0 auto);
    .flexy(center);
    .button_icon_cascade(10);
    .icon_stroke(@font_color);
    height: @tile;
    color: @gray_dark;
    transition: 100ms;
    &:not([disabled]) {
      &:hover {
        cursor: pointer;
        background: @gray_lightest;
        transition-duration: 100ms;
      }
    }
    i {
      .flex(0 0 auto);
      margin: 0 ((@aside_width_sm - @icon_width) / 2);
      transition: 300ms;
    }
    span {
      overflow: hidden;
    }
  }
  .aside-settings {
    > button {
      &:hover {
        background: none;
      }
    }
  }
}
.aside-chat {
  .flex(1);
  .flexy(column);
  overflow: hidden;

  form {
    .flex(0 0 auto);
    .flexy();
    margin: 0;
  }
  input {
    width: 100%;
    height: @tile;
    border: none;
    border-top: 1px solid #555;
    padding: 0 1em;
    outline: 0;
    background: none;
  }
}
.chat-container {
  .flexy(column);
  margin-top: auto;
}
.chat-messages {
  width: @aside_width_lg;
  margin-left: @tile;
  padding: 1em;
  opacity: 0;
  overflow-y: auto;
  overflow-x: hidden;
  transition: 500ms;
  &::-webkit-scrollbar {
    width: 0;
  }
  span {
    word-break: break-word;
  }
}
.aside-settings {
  .flexy(column);
  margin-top: auto;
  opacity: 1;
  transition: 300ms @bezier_fadein;
  &:hover {
    > button {
      .user-select(none);
      opacity: 0;
      cursor: default;
      // this is still pretty buggy, opens and closes at weird times
      transition-duration: 200ms;
      height: 0;
    }
    .settings-menu {
      max-height: @tile * 3;
      transition-duration: 200ms;
    }
  }
}
.settings-menu {
  .flexy(column);
  max-height: 0;
  transition: 300ms @bezier_transform;
  button {
    padding-left: ((@aside_width_sm - @icon_width) / 2);
    i {
      margin-left: auto;
      margin-right: ((@aside_width_sm - @icon_width) / 2);
    }
  }
}
.radial-menu {
  position: fixed;
  width: (@radial_menu_size * 1.5);
  height: (@radial_menu_size * 1.5);
  .radial-button {
    .scale3d(1.1);
    fill: @gray_lighter;
    stroke: @gray_lighter;
    &:not(:hover) {
      .scale3d(1);
      fill: @app_background;
      i {
        path {
          stroke: @gray;
        }
      }
    }
    &:nth-child(1) { .transform-origin(bottom left); }
    &:nth-child(2) { .transform-origin(left); }
    &:nth-child(3) { .transform-origin(top left); }
    &:nth-child(4) { .transform-origin(top right); }
    &:nth-child(5) { .transform-origin(right); }
    &:nth-child(6) { .transform-origin(bottom right); }
  }
  i {
    path {
      stroke: @gray_darker;
    }
  }
}
.radial-tool-type {
  .flexy(center, center, column);
  .user-select(none);
  pointer-events: none;
  position: absolute;
  text-transform: capitalize;
  &:nth-of-type(1) { top: 100px; left: 215px; }
  &:nth-of-type(2) { top: 170px; left: 260px; }
  &:nth-of-type(3) { top: 240px; left: 215px; }
  &:nth-of-type(4) { top: 240px; left: 140px; }
  &:nth-of-type(5) { top: 170px; left: 100px; }
  &:nth-of-type(6) { top: 100px; left: 135px; }
  i {
    margin-bottom: .25em;
  }
}
.radial-menu-nub {
  @size: (@font_size / 2);
  width: @size;
  height: @size;
  border-radius: @size;
  background: @gray_lighter;
  position: absolute;
  top: (((@radial_menu_size * 1.5) - @size) / 2);
  left: (((@radial_menu_size * 1.5) - @size) / 2);
  cursor: default;
}
.right-click-menu {
  display: none !important; // hold off for now
  .flexy(column);
  .outline();
  position: fixed;
  top: 25%;
  left: 25%;
  width: (@radial_menu_size * (2 / 3));
  background: @app_background;
  overflow: hidden;
  button {
    .flexy();
    height: (@tile / 2);
    padding: 0 1em;
    color: @gray;
    background: fade(@white, 0);
    transition: 200ms;
    &:hover {
      color: @gray_darker;
      background: @gray_lighter;
    }
  }
  hr {
    width: 100%;
    border: 0;
    box-shadow: 0 1px @gray_lighter inset;
    height: 1px;
  }
}
.right-click-align {
  display: none !important; // hold off for now
  .flexy(column);
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
  button {
    background: @app_background;
  }
}
