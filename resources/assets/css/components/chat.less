.app-chat {
  .flexy(column);
  width: 20vw;
  min-width: @tile_chat;
  box-shadow: -1px 0 @gray_dark;
  overflow: hidden;
  transition: @speed @bezier_transform;
  // transition-timing-function: @bezier_bounce;
  .mq_640({
    .flex-direction(row);
    position: relative;
    padding-top: @tile;
  });
  &.closed {
    width: 0;
    min-width: 0;
    transition-timing-function: @bezier_transform;
    .icon-user {
      margin: 0 .5em;
      transition-delay: @speed_slow;
    }
    .chat-log {
      textarea {
        padding-left: 0;
        opacity: 0;
        transition-delay: @speed_slow;
      }
    }
  }
  &.show-chat-on-mobile {
    .mq_640({
      .chat-people {
        margin-left: -100%;
      }
    });
  }
  section {
    .flex(1 1 auto);
    .flexy(column);
    width: 20vw;
    min-width: 16rem;
    min-height: @tile_chat;
    .mq_640({
      .flex(0 0 100%);
      transition: @speed;
    });
  }
}
.chat-switcher {
  display: none;
  position: absolute;
  color: @white;
  top: 0;
  left: 0;
  width: @tile_chat;
  .mq_640({
    .flexy();
  });
}
.chat-switcher-option {
  .flex(0 0 50%);
  .flexy(center, center);
  height: @tile;
  &:not(.toggled) {
    color: @gray;
    background: fade(@black, 13);
  }
}
.chat-people {
  .scrollbar_hide(); // we should calculate to get this effect in the dom
  overflow-y: auto;
  a {
    &[role="button"] {
      .flex(0 0 @tile);
      .flexy(center);
      .button_icon_cascade(32);
      .icon_stroke(@gray_lighter);
      min-height: (@tile / 2);
      color: @gray_light;
      &:hover,
      &:active {
        .icon_stroke(@gray_lightest);
        cursor: pointer;
        color: @gray_lighter;
        background: @gray_dark;
      }
      &.people-you {
        cursor: text;
      }
    }
  }
  .icon-user {
    .flex(0 0 auto);
    margin: 0 1em;
    transition: margin @speed @bezier_transform 0ms;
  }
  input {
    height: @tile;
    max-height: (@tile * 2);
    background: none;
    border: none;
    outline: 0;
    color: @white;
  }
}
.chat-log {
  .justify-content(flex-end);
  form {
    .flex(0 0 auto);
    .flexy();
    margin: 0;
    box-shadow: 0 1px @gray_dark inset;
  }
  textarea {
    .flex(1);
    .placeholder_style(color; @gray_dark);
    height: @tile;
    max-height: (@tile * 2);
    background: none;
    padding: 1.25em 1.25em 0;
    border: none;
    outline: 0;
    resize: none;
    transition+: padding @speed @bezier_transform 0ms;
    transition+: opacity @speed @bezier_fadein    0ms;
    &:focus {
      .placeholder_style(color; fade(@gray_dark, 0));
    }
  }
}
.chat-messages {
  .scrollbar_hide(); // TODO we should calculate to get this effect in the dom
  padding: 1em 0;
  overflow-y: auto;
  .mq_640({
    width: @tile_chat;
  });
  span {
    word-break: break-word;
  }
  .message {
    padding: 0 1em;
  }
}
.chat-button {
  .icon_stroke(@gray);
  .flexy(center, center);
  position: absolute;
  font-size: 1.5em;
  bottom: 0;
  right: 0;
  width: @tile;
  height: @tile;
  &:hover {
    .icon_stroke(@white);
    .unseen-eids {
      background: lighten(#c0392b, 10);
      color: @white;
      border-color: lighten(#c0392b, 10);
      height: 1.8em;
      min-width: 1.8em;
      padding: 2px 4px;
      bottom: 3.1em;
      right: 3.1em;
    }
  }
}
